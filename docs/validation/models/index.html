<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-ZGCNWVF92C","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Models | Symfony Boilerplate</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Models | Symfony Boilerplate"><meta data-react-helmet="true" name="description" content="Most of the time, you want to validate a model&#x27;s data."><meta data-react-helmet="true" property="og:description" content="Most of the time, you want to validate a model&#x27;s data."><meta data-react-helmet="true" property="og:url" content="https://thecodingmachine.github.io/symfony-boilerplate/docs/validation/models"><link data-react-helmet="true" rel="shortcut icon" href="/symfony-boilerplate/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://thecodingmachine.github.io/symfony-boilerplate/docs/validation/models"><link rel="stylesheet" href="/symfony-boilerplate/styles.50e5c0aa.css">
<link rel="preload" href="/symfony-boilerplate/styles.1f926091.js" as="script">
<link rel="preload" href="/symfony-boilerplate/runtime~main.a32022c0.js" as="script">
<link rel="preload" href="/symfony-boilerplate/main.0fb1cd82.js" as="script">
<link rel="preload" href="/symfony-boilerplate/1.c2db6241.js" as="script">
<link rel="preload" href="/symfony-boilerplate/62.d013e84d.js" as="script">
<link rel="preload" href="/symfony-boilerplate/63.f1c6b7af.js" as="script">
<link rel="preload" href="/symfony-boilerplate/935f2afb.1f6ad04c.js" as="script">
<link rel="preload" href="/symfony-boilerplate/61.4d1affe1.js" as="script">
<link rel="preload" href="/symfony-boilerplate/dcbe4190.56c82ba6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/symfony-boilerplate/"><img src="/symfony-boilerplate/img/logo.svg" alt="Symfony Boilerplate Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/symfony-boilerplate/img/logo.svg" alt="Symfony Boilerplate Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Symfony Boilerplate</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/symfony-boilerplate/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/thecodingmachine/symfony-boilerplate" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/symfony-boilerplate/"><img src="/symfony-boilerplate/img/logo.svg" alt="Symfony Boilerplate Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img src="/symfony-boilerplate/img/logo.svg" alt="Symfony Boilerplate Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Symfony Boilerplate</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/symfony-boilerplate/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/thecodingmachine/symfony-boilerplate" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Get Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/installation">Installation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development Environment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/development-environment/docker-compose">Docker Compose</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/development-environment/vagrant">Vagrant</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/development-environment/housekeeping">Housekeeping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/api">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/api/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/api/composer">Composer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/api/housekeeping">Housekeeping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Web Application</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/webapp">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/webapp/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/webapp/yarn">Yarn</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/webapp/housekeeping">Housekeeping</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Database</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/database/ORM">ORM</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/database/doctrine-migrations">Doctrine Migrations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/database/models">Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/database/daos">DAOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/database/development-data">Development Data</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">GraphQL</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/graphql">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">i18n</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/i18n/default-locale">Default Locale</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/i18n/api">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/i18n/web-application">Web Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/i18n/api-and-web-application-interactions">API and Web Application Interactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/i18n/disable-i18n">Disable i18n</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/security">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/security/authentication">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/security/access-control">Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/security/CORS">CORS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Files</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/files/assets">Assets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/files/temporary-files">Temporary Files</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/files/uploads">Uploads</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Validation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/symfony-boilerplate/docs/validation">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/symfony-boilerplate/docs/validation/models">Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/symfony-boilerplate/docs/validation/use-cases">Use Cases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/symfony-boilerplate/docs/validation/graphql">GraphQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/symfony-boilerplate/docs/validation/forms">Forms</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Lists</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/lists">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/lists/database">Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/lists/graphql">GraphQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/lists/web-application">Web Application</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Emails</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/emails">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/emails/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/emails/send-emails">Send Emails</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/emails/templates">Templates</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Static Analysis</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/static-analysis/api">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/static-analysis/web-application">Web Application</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tests</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/tests/api">API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/tests/web-application">Web Application</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Theme</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/theme/customization">Customization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/theme/layouts">Layouts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deployments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/deployments">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/deployments/docker-images">Docker Images</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/deployments/cicd">CI/CD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/deployments/run">Run</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/symfony-boilerplate/docs/deployments/logrocket">LogRocket</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Models</h1></header><div class="markdown"><p>Most of the time, you want to validate a model&#x27;s data.</p><p>In the Symfony Boilerplate, we distinguish three kinds of models:</p><ol><li>The <a href="https://github.com/thecodingmachine/tdbm" target="_blank" rel="noopener noreferrer">TDBM</a> models for business data.</li><li>The <code>Storable</code> models for uploads.</li><li>The <code>Proxy</code> models for data that do not fit in previous scenarios.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="tdbm-models"></a>TDBM Models<a class="hash-link" href="#tdbm-models" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="migrations"></a>Migrations<a class="hash-link" href="#migrations" title="Direct link to heading">#</a></h3><p>The first stone for validating your <a href="https://github.com/thecodingmachine/tdbm" target="_blank" rel="noopener noreferrer">TDBM</a> models occurs in
the Doctrine migrations.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ðŸ“£Â Â See the <a href="/symfony-boilerplate/docs/database/doctrine-migrations">Database</a> chapter for more details about Doctrine migrations.</p></div></div><p>For instance, let&#x27;s take a look at the Doctrine migration for the <code>users</code> table:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">up</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Schema </span><span class="token variable" style="color:rgb(191, 199, 213)">$schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> void</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token variable" style="color:rgb(191, 199, 213)">$db</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TdbmFluidSchema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token variable" style="color:rgb(191, 199, 213)">$schema</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token variable" style="color:rgb(191, 199, 213)">$db</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">table</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token single-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;users&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">column</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token single-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;id&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">guid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">primaryKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">comment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token single-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;@UUID&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">graphqlField</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">column</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token single-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;first_name&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">notNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">graphqlField</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">column</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token single-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;last_name&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">notNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">graphqlField</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">column</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token single-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;email&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">notNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">unique</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">graphqlField</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">column</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token single-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;password&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">255</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token keyword" style="font-style:italic">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token constant" style="color:rgb(130, 170, 255)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Here we are already defining rules:</p><ul><li>Scalar values (string, int, etc.).</li><li>Nullable or not.</li><li>Default values.</li><li>Unique values.</li><li>GraphQL fields (i.e., values available in the GraphQL API).</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="php-classes"></a>PHP Classes<a class="hash-link" href="#php-classes" title="Direct link to heading">#</a></h3><p>Of course, most of these rules are not user-friendly nor developer-friendly as they occur on the database level.</p><p>Yet, after applying this migration, <a href="https://github.com/thecodingmachine/tdbm" target="_blank" rel="noopener noreferrer">TDBM</a> is able to generate two PHP classes:</p><ul><li><code>BaseUser</code>.</li><li><code>User</code> that extends <code>BaseUser</code>.</li></ul><p>Let&#x27;s take a look at the constructor&#x27;s signature from the <code>BaseUser</code> class:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Model/Generated/BaseUser.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">__construct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">string </span><span class="token variable" style="color:rgb(191, 199, 213)">$firstName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> string </span><span class="token variable" style="color:rgb(191, 199, 213)">$lastName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> string </span><span class="token variable" style="color:rgb(191, 199, 213)">$email</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> string </span><span class="token variable" style="color:rgb(191, 199, 213)">$locale</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> string </span><span class="token variable" style="color:rgb(191, 199, 213)">$role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Here we can see that non-nullable properties are <strong>mandatory</strong>. Also, all the properties have an <strong>explicit type</strong>.</p><p>For getters and setters, it works the same:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Model/Generated/BaseUser.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getFirstName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">setFirstName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">string </span><span class="token variable" style="color:rgb(191, 199, 213)">$firstName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Overall, it greatly improves the developer experience as you cannot put a wrong type nor miss a mandatory property when
creating/updating an instance of a <a href="https://github.com/thecodingmachine/tdbm" target="_blank" rel="noopener noreferrer">TDBM</a> model. ðŸ˜‰</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="annotations"></a>Annotations<a class="hash-link" href="#annotations" title="Direct link to heading">#</a></h3><p>That being said, it&#x27;s still not enough. For instance, how to make sure a value is unique? Or a string is not superior to
256 characters?</p><p>You could let the database tell you about these issues, but that&#x27;s usually done in a non developer-friendly way.</p><p>Thankfully, the <a href="https://symfony.com/doc/current/validation.html" target="_blank" rel="noopener noreferrer">Symfony Validation</a> bundle provides most of the rules
(aka constraints) you may want to apply to a <a href="https://github.com/thecodingmachine/tdbm" target="_blank" rel="noopener noreferrer">TDBM</a> model&#x27;s property.</p><p>You may also add your own rules.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ðŸ“£Â Â See the <a href="https://symfony.com/doc/current/validation.html#constraints" target="_blank" rel="noopener noreferrer">Constraints</a> chapter of the official
documentation for the list of available rules.</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ðŸ“£Â Â The folder <em>src/api/src/Domain/Constraint</em> contains our custom-made constraints.</p></div></div><p>As we cannot modify the <code>BaseUser</code> class, we have to override the getters in the <code>User</code> class.</p><p>For instance, let&#x27;s take a look at the <code>email</code> property getter:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Model/User.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">Symfony</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Component</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Validator</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Constraints</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> Assert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">TheCodingMachine</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">GraphQLite</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Annotations</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Field</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @Field</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @Assert\NotBlank(message=&quot;not_blank&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @Assert\Length(max=255, maxMessage=&quot;max_length_255&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @Assert\Email(message=&quot;invalid_email&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getEmail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token function" style="color:rgb(130, 170, 255)">getEmail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>In addition to type hint (non-nullable string), we add three rules:</p><ol><li>The email cannot be blank.</li><li>The email cannot have a length superior to 255 characters.</li><li>The email has to be valid.</li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ðŸ“£Â Â The message attribute contains a translation key. See the <a href="/symfony-boilerplate/docs/i18n/api">i18n</a> chapter for more
details.</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ðŸ“£Â Â Don&#x27;t forget to add the <code>@Field</code> annotation if the property should be available in GraphQL. Indeed,
when overriding a getter, <a href="https://graphqlite.thecodingmachine.io/" target="_blank" rel="noopener noreferrer">GraphQLite</a> does not parse anymore the annotation
from the parent getter.</p></div></div><p>You may also add a validation annotation to the class itself:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Model/User.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Domain</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Constraint</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> DomainAssert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">TheCodingMachine</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">GraphQLite</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Annotations</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @Type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @DomainAssert\Unicity(table=&quot;users&quot;, column=&quot;email&quot;, message=&quot;user.email_not_unique&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">User</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">BaseUser</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>In this scenario, we use our custom-made <code>Unicity</code> constraint that verify if a value does not already exist in the
database.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="daos"></a>DAOs<a class="hash-link" href="#daos" title="Direct link to heading">#</a></h3><p>In addition to the model classes, <a href="https://github.com/thecodingmachine/tdbm" target="_blank" rel="noopener noreferrer">TDBM</a> also generates the DAO classes.</p><p>Like the models, there are two of them:</p><ul><li><code>BaseUserDao</code>.</li><li><code>UserDao</code> that extends <code>BaseDao</code>.</li></ul><p>In the later, we have to inject a <code>ValidatorInterface</code>:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Dao/UserDao.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">Symfony</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Component</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Validator</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Validator</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">ValidatorInterface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">TheCodingMachine</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">TDBM</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">TDBMService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">UserDao</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">BaseUserDao</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> ValidatorInterface </span><span class="token variable" style="color:rgb(191, 199, 213)">$validator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">__construct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">TDBMService </span><span class="token variable" style="color:rgb(191, 199, 213)">$tdbmService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ValidatorInterface </span><span class="token variable" style="color:rgb(191, 199, 213)">$validator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token variable" style="color:rgb(191, 199, 213)">$this</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token property">validator</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$validator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token function" style="color:rgb(130, 170, 255)">__construct</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token variable" style="color:rgb(191, 199, 213)">$tdbmService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>The <code>ValidatorInterface</code> provides the method <code>validate</code> that returns the list of all violations according to the model
constraints:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/** User $user */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token variable" style="color:rgb(191, 199, 213)">$violations</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$this</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token property">validator</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">validate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token variable" style="color:rgb(191, 199, 213)">$user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>By convention, it&#x27;s great to add a <code>validate</code> method in your DAOs:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Dao/UserDao.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Domain</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Throwable</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">InvalidModel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @throws InvalidModel</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">validate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">User </span><span class="token variable" style="color:rgb(191, 199, 213)">$user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> void</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token variable" style="color:rgb(191, 199, 213)">$violations</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$this</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token property">validator</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">validate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token variable" style="color:rgb(191, 199, 213)">$user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    InvalidModel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token function" style="color:rgb(130, 170, 255)">throwException</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token variable" style="color:rgb(191, 199, 213)">$violations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>This method throws an exception if there are any violations in the model.</p><p>Last but not least, you should override the <code>save</code> method from the base DAO:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Dao/UserDao.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @throws InvalidModel</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">User </span><span class="token variable" style="color:rgb(191, 199, 213)">$user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> void</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token variable" style="color:rgb(191, 199, 213)">$this</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">validate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token variable" style="color:rgb(191, 199, 213)">$user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token function" style="color:rgb(130, 170, 255)">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token variable" style="color:rgb(191, 199, 213)">$user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>This approach has two HUGE benefits:</p><ol><li>You centralize the action of validating at one place.</li><li>You <strong>always</strong> validate a model before saving it in the database.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="storable-models"></a>Storable Models<a class="hash-link" href="#storable-models" title="Direct link to heading">#</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ðŸ“£Â Â See the <a href="/symfony-boilerplate/docs/files/uploads">Uploads</a> chapter for more details about uploads storage.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="php-class"></a>PHP Class<a class="hash-link" href="#php-class" title="Direct link to heading">#</a></h3><p>A storable is a wrapper around an upload. You may want to validate its extension, size, etc.</p><p>You have to extend the <code>Storable</code> class with a custom class:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Model/Storable/MyStorable.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MyStorable</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Storable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Here you may override or add custom getters.</p><p>Indeed, like the <a href="https://github.com/thecodingmachine/tdbm" target="_blank" rel="noopener noreferrer">TDBM</a> models, a storable
may uses Symfony Validation annotations. ðŸ˜‰</p><p>For instance, let&#x27;s say you want to validate the upload&#x27;s extension:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Model/Storable/MyStorable.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">Symfony</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Component</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Validator</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Constraints</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">as</span><span class="token plain"> Assert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @Assert\Choice({&quot;png&quot;, &quot;jpg&quot;}, message=&quot;my_storable.invalid_extensions&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getExtension</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token function" style="color:rgb(130, 170, 255)">getExtension</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="storage"></a>Storage<a class="hash-link" href="#storage" title="Direct link to heading">#</a></h3><p>A storage is like a DAO but for storables.</p><p>It provides methods for validating one or more storables:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Storage/Storage.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Domain</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Throwable</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">InvalidStorable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @param Storable[] $storables</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @throws InvalidStorable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">validateAll</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">array</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$storables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @throws InvalidStorable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">validate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Storable </span><span class="token variable" style="color:rgb(191, 199, 213)">$storable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Like the <code>save</code> method from a <code>DAO</code>, its <code>write</code> and <code>writeAll</code> methods also call the validation methods:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">src/api/src/Domain/Storage/Storage.php</div><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-php codeBlock_3iAC thin-scrollbar codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">use</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Domain</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">Throwable</span><span class="token package punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token package">InvalidStorable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @param Storable[] $storables</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @return string[]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @throws InvalidStorable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">writeAll</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">array</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$storables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> * @throws InvalidStorable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Storable </span><span class="token variable" style="color:rgb(191, 199, 213)">$storable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="proxy-models"></a>Proxy Models<a class="hash-link" href="#proxy-models" title="Direct link to heading">#</a></h2><p>Proxy models are PHP classes that does not reflect a database&#x27;s table nor an upload.</p><p>In other words, they are plain old PHP objects.</p><p>However, you may use Symfony Validation annotations on these models getters and validate them
using the <code>ValidatorInterface</code> and <code>InvalidModel</code> classes. ðŸ˜‰</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ðŸ“£Â Â Don&#x27;t forget to add the <code>@Type</code> and <code>@Field</code> annotations if the model should be available in GraphQL.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/thecodingmachine/symfony-boilerplate/tree/master/docs/docs/10_Validation/2_Models.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/symfony-boilerplate/docs/validation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/symfony-boilerplate/docs/validation/use-cases"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Use Cases Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tdbm-models" class="table-of-contents__link">TDBM Models</a><ul><li><a href="#migrations" class="table-of-contents__link">Migrations</a></li><li><a href="#php-classes" class="table-of-contents__link">PHP Classes</a></li><li><a href="#annotations" class="table-of-contents__link">Annotations</a></li><li><a href="#daos" class="table-of-contents__link">DAOs</a></li></ul></li><li><a href="#storable-models" class="table-of-contents__link">Storable Models</a><ul><li><a href="#php-class" class="table-of-contents__link">PHP Class</a></li><li><a href="#storage" class="table-of-contents__link">Storage</a></li></ul></li><li><a href="#proxy-models" class="table-of-contents__link">Proxy Models</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 TheCodingMachine, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/symfony-boilerplate/styles.1f926091.js"></script>
<script src="/symfony-boilerplate/runtime~main.a32022c0.js"></script>
<script src="/symfony-boilerplate/main.0fb1cd82.js"></script>
<script src="/symfony-boilerplate/1.c2db6241.js"></script>
<script src="/symfony-boilerplate/62.d013e84d.js"></script>
<script src="/symfony-boilerplate/63.f1c6b7af.js"></script>
<script src="/symfony-boilerplate/935f2afb.1f6ad04c.js"></script>
<script src="/symfony-boilerplate/61.4d1affe1.js"></script>
<script src="/symfony-boilerplate/dcbe4190.56c82ba6.js"></script>
</body>
</html>