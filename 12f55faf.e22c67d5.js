(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{137:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=i.a.createContext({}),m=function(e){var t=i.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},b=function(e){var t=m(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),b=m(n),u=a,d=b["".concat(o,".").concat(u)]||b[u]||p[u]||r;return n?i.a.createElement(d,s(s({ref:t},c),{},{components:n})):i.a.createElement(d,s({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},68:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return m}));var a=n(3),i=n(7),r=(n(0),n(137)),o={title:"Web Application",slug:"/lists/web-application"},s={unversionedId:"11_Lists/4_Web Application",id:"11_Lists/4_Web Application",isDocsHomePage:!1,title:"Web Application",description:"\ud83d\udce3&nbsp;&nbsp;The Symfony Boilerplate uses BootstrapVue as templating framework.",source:"@site/docs/11_Lists/4_Web Application.md",slug:"/lists/web-application",permalink:"/symfony-boilerplate/docs/lists/web-application",editUrl:"https://github.com/thecodingmachine/symfony-boilerplate/tree/master/docs/docs/11_Lists/4_Web Application.md",version:"current",sidebar:"docs",previous:{title:"GraphQL",permalink:"/symfony-boilerplate/docs/lists/graphql"},next:{title:"Overview",permalink:"/symfony-boilerplate/docs/emails"}},l=[{value:"List Mixin",id:"list-mixin",children:[]},{value:"Initialization",id:"initialization",children:[]},{value:"Fields / Headers",id:"fields--headers",children:[]},{value:"Data",id:"data",children:[]},{value:"Search",id:"search",children:[{value:"Live Search",id:"live-search",children:[]},{value:"On Click Search",id:"on-click-search",children:[]},{value:"Search Logic",id:"search-logic",children:[]}]},{value:"Sort",id:"sort",children:[]},{value:"Paginate",id:"paginate",children:[]},{value:"Loading State",id:"loading-state",children:[]}],c={toc:l};function m(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","The Symfony Boilerplate uses ",Object(r.b)("a",{parentName:"p",href:"https://bootstrap-vue.org/"},"BootstrapVue")," as templating framework.\nHowever, most of the explanations from this chapter should work with most frameworks with little adjustments."))),Object(r.b)("h2",{id:"list-mixin"},"List Mixin"),Object(r.b)("p",null,"The Symfony Boilerplate provides the ",Object(r.b)("inlineCode",{parentName:"p"},"List")," mixin. This mixin contains useful data and methods to help you build a list."),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","A mixin content merges with the content of your Vue component."))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},"import { List } from '@/mixins/list'\n\nexport default {\n  mixins: [List],\n}\n")),Object(r.b)("h2",{id:"initialization"},"Initialization"),Object(r.b)("p",null,"The initialization of your page occurs in the ",Object(r.b)("inlineCode",{parentName:"p"},"asyncData")," attribute of your Vue Component:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},"import { List, defaultItemsPerPage, calculateOffset } from '@/mixins/list'\nimport { UsersQuery } from '@/graphql/users/users.query'\n\nexport default {\n  mixins: [List],\n  // On page access, Nuxt.js always server-renders a Vue component \n  // with an \"asyncData\" property.\n  async asyncData(context) {\n    // You don't have access to \"this\" but context instead.\n    try {\n      const result = await context.app.$graphql.request(UsersQuery, {\n        // Most of the values come either from the query parameters\n        // (i.e., ?foo=bar,baz=2) or a default value.\n        search: context.route.query.search || '',\n        role: context.route.query.role || null,\n      })\n\n      return {\n        items: result.users.items,\n      }\n    } catch (e) {\n      context.error(e)\n    }\n  },\n}\n")),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0",Object(r.b)("inlineCode",{parentName:"p"},"asyncData")," merges at runtime with the ",Object(r.b)("inlineCode",{parentName:"p"},"data")," of your Vue component."))),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","Don't use ",Object(r.b)("inlineCode",{parentName:"p"},"null")," as value for your scalar parameters as it will make your page reload. Prefer,\nfor instance, an empty string. "))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-table\n  :items="items"\n></b-table>\n')),Object(r.b)("h2",{id:"fields--headers"},"Fields / Headers"),Object(r.b)("p",null,"You do that in the ",Object(r.b)("inlineCode",{parentName:"p"},"data")," attribute of your Vue component:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},"data() {\n  return {\n    fields: [\n      { key: 'id', label: '#' },\n      {\n        key: 'firstName',\n        label: this.$t('common.first_name'),\n      },\n      { key: 'lastName', label: this.$t('common.last_name') },\n      { key: 'email', label: this.$t('common.email') },\n      { key: 'locale', label: this.$t('common.locale') },\n      { key: 'role', label: this.$t('common.role') },\n    ],\n  }\n},\n")),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","The key value have to have the same name as the corresponding GraphQL field."))),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-table\n  :items="items"\n  :fields="fields"\n></b-table>\n')),Object(r.b)("h2",{id:"data"},"Data"),Object(r.b)("p",null,"By default, the ",Object(r.b)("inlineCode",{parentName:"p"},"<b-table>")," component automatically renders the data thanks to its ",Object(r.b)("inlineCode",{parentName:"p"},"items")," and ",Object(r.b)("inlineCode",{parentName:"p"},"fields")," attributes."),Object(r.b)("p",null,"However, you may want to customize the output. For instance:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-table\n  :items="items"\n  :fields="fields"\n>\n    \x3c!-- Template for "role" column. --\x3e\n    <template #cell(role)="data">\n      {{ roleTranslationFromEnum(data.item.role) }}\n    </template>\n</b-table>\n')),Object(r.b)("h2",{id:"search"},"Search"),Object(r.b)("p",null,"There are two kinds of search:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Live search."),Object(r.b)("li",{parentName:"ol"},"On click search.")),Object(r.b)("p",null,"First, you have to prepare your data:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},"data() {\n  return {\n    filters: {\n      search: this.$route.query.search || '',\n      role: this.$route.query.role || null,\n    },\n    // ...\n  }\n},\n")),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","Don't use ",Object(r.b)("inlineCode",{parentName:"p"},"null")," as value for your scalar parameters as it will make your page reload. Prefer,\nfor instance, an empty string. "))),Object(r.b)("h3",{id:"live-search"},"Live Search"),Object(r.b)("p",null,"For ",Object(r.b)("inlineCode",{parentName:"p"},'<b-input type="text">')," component, you should use both the ",Object(r.b)("inlineCode",{parentName:"p"},":debounce")," and ",Object(r.b)("inlineCode",{parentName:"p"},"@update")," attributes:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-form @submit.stop.prevent>\n    <b-input\n      v-model="filters.search"\n      type="text"\n      autofocus\n      trim\n      :debounce="debounce"\n      @update="onSearch"\n    ></b-input>\n</b-form>\n')),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","The default ",Object(r.b)("inlineCode",{parentName:"p"},"debounce")," value comes from the ",Object(r.b)("inlineCode",{parentName:"p"},"List")," mixin."))),Object(r.b)("p",null,"For ",Object(r.b)("inlineCode",{parentName:"p"},"<b-form-select>")," component, you should use the ",Object(r.b)("inlineCode",{parentName:"p"},"@change")," attribute:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-form @submit.stop.prevent>\n    <b-form-select\n      v-model="filters.role"\n      :options="rolesAsSelectOptions(true)"\n      @change="onSearch"\n    >\n    </b-form-select>\n</b-form>\n')),Object(r.b)("h3",{id:"on-click-search"},"On Click Search"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-form @submit.stop.prevent="onSearch">\n    <b-button\n        variant="primary"\n        type="submit"\n        >{{ $t(\'common.search\') }}</b-button\n      >\n</b-form>\n')),Object(r.b)("h3",{id:"search-logic"},"Search Logic"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"List")," mixin provides the ",Object(r.b)("inlineCode",{parentName:"p"},"onSearch")," method. It resets the current page to 1 and call the ",Object(r.b)("inlineCode",{parentName:"p"},"doSearch")," method.\nYou have to implement this last method:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},'methods: {\n  async doSearch() {\n    // Updates the query parameters for the current page.\n    // For instance, if filter.search="foo", your page URL becomes\n    // "?search=foo". It also works with sort by and sort order value,\n    // plus pagination. See below.\n    this.updateRouter()\n    try {\n      const result = await this.$graphql.request(UsersQuery, {\n        search: this.filters.search,\n        role: this.filters.role,\n      })\n      this.items = result.users.items\n    } catch (e) {\n      this.$nuxt.error(e)\n    }\n  },\n}\n')),Object(r.b)("h2",{id:"sort"},"Sort"),Object(r.b)("p",null,"The browser could handle the sorting, but it does not make sense in the Symfony Boilerplate, as the API is able to handle\nthis task for us."),Object(r.b)("p",null,"Yet, we have to prepare the UI."),Object(r.b)("p",null,"First let's start by updating the data:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},"import { EMAIL, FIRST_NAME, LAST_NAME } from '@/enums/filters/users-sort-by'\n\ndata() {\n  return {\n    // We add the \"sortable\" attribute to the columns\n    // we want to sort or not.\n    fields: [\n      { key: 'id', label: '#', sortable: false },\n      {\n        key: 'firstName',\n        label: this.$t('common.first_name'),\n        sortable: true,\n      },\n      { key: 'lastName', label: this.$t('common.last_name'), sortable: true },\n      { key: 'email', label: this.$t('common.email'), sortable: true },\n      { key: 'locale', label: this.$t('common.locale'), sortable: false },\n      { key: 'role', label: this.$t('common.role'), sortable: false },\n    ],\n    // We define the property \"sortByMap\" where:\n    // 1. Key = field / header name.\n    // 2. Value = sort value we want to send to the API.\n    sortByMap: {\n      firstName: FIRST_NAME,\n      lastName: LAST_NAME,\n      email: EMAIL,\n     },\n  }\n},\n")),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",{parentName:"div",className:"admonition-heading"},Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",{parentName:"h5",className:"admonition-icon"},Object(r.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(r.b)("div",{parentName:"div",className:"admonition-content"},Object(r.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","It is best to create a dedicated enum in ",Object(r.b)("em",{parentName:"p"},"src/webapp/enums/filters")," for sort by values. "))),Object(r.b)("p",null,"Once the data is ready, we have to update the ",Object(r.b)("inlineCode",{parentName:"p"},"<b-table>")," component:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-table\n  :items="items"\n  :fields="fields"\n  :no-local-sorting="true"\n  :sort-by="boostrapTableSortBy"\n  :sort-desc="isDesc"\n  @sort-changed="onSort"\n></b-table>\n')),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},":no-local-sorting")," disables browser-side sorting."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},":sort-by")," uses the computed value ",Object(r.b)("inlineCode",{parentName:"li"},"boostrapTableSortBy")," from the ",Object(r.b)("inlineCode",{parentName:"li"},"List")," mixin. This computed value uses itself our\n",Object(r.b)("inlineCode",{parentName:"li"},"sortByMap"),"."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},":sort-desc")," uses the computed value ",Object(r.b)("inlineCode",{parentName:"li"},"isDesc")," from the ",Object(r.b)("inlineCode",{parentName:"li"},"List")," mixin."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"@sort-changed")," uses the method ",Object(r.b)("inlineCode",{parentName:"li"},"onSort")," from the ",Object(r.b)("inlineCode",{parentName:"li"},"List")," mixin. This method sets the ",Object(r.b)("inlineCode",{parentName:"li"},"this.sortBy")," and ",Object(r.b)("inlineCode",{parentName:"li"},"this.sortOrder"),"\nvalues from the mixin, reset the current page to 1, before calling your ",Object(r.b)("inlineCode",{parentName:"li"},"doSearch")," method.")),Object(r.b)("p",null,"We may now update the ",Object(r.b)("inlineCode",{parentName:"p"},"asyncData")," and ",Object(r.b)("inlineCode",{parentName:"p"},"doSearch")," methods:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},"async asyncData(context) {\n  try {\n    const result = await context.app.$graphql.request(UsersQuery, {\n      search: context.route.query.search || '',\n      role: context.route.query.role || null,\n      sortBy: context.route.query.sortBy || null,\n      sortOrder: context.route.query.sortOrder || null,\n    })\n    return {\n      items: result.users.items,\n    }\n  } catch (e) {\n    context.error(e)\n  }\n},\nmethods: {\n  async doSearch() {\n    this.updateRouter()\n    try {\n      const result = await this.$graphql.request(UsersQuery, {\n        search: this.filters.search,\n        role: this.filters.role,\n        sortBy: this.sortBy,\n        sortOrder: this.sortOrder,\n      })\n      this.items = result.users.items\n    } catch (e) {\n      this.$nuxt.error(e)\n    }\n  },\n}\n")),Object(r.b)("h2",{id:"paginate"},"Paginate"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"<b-pagination>")," component is a great way to handle pagination for a list:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-pagination\n    v-model="currentPage"\n    :per-page="itemsPerPage"\n    :total-rows="count"\n    align="center"\n    @change="onPaginate"\n    @click.native="$scrollToTop"\n/>\n')),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"currentPage")," is a data from the ",Object(r.b)("inlineCode",{parentName:"li"},"List")," mixin."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},":per-page")," uses the ",Object(r.b)("inlineCode",{parentName:"li"},"itemsPerPage")," data from the ",Object(r.b)("inlineCode",{parentName:"li"},"List")," mixin. You may override its value in your component."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},":total-rows")," uses the ",Object(r.b)("inlineCode",{parentName:"li"},"count")," data from the ",Object(r.b)("inlineCode",{parentName:"li"},"List")," mixin. You update this value in your ",Object(r.b)("inlineCode",{parentName:"li"},"doSearch")," method."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"@change")," uses the method ",Object(r.b)("inlineCode",{parentName:"li"},"onPaginate")," from the ",Object(r.b)("inlineCode",{parentName:"li"},"List")," mixin. It sets the current page and calls your ",Object(r.b)("inlineCode",{parentName:"li"},"doSearch")," method."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},'@click.native="$scrollToTop')," calls the plugin ",Object(r.b)("inlineCode",{parentName:"li"},"scrollToTop")," that... scrolls to the top of the page when the user\nclicks on the pagination buttons.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},"import { defaultItemsPerPage, calculateOffset } from '@/mixins/list'\n\nasync asyncData(context) {\n  try {\n    const result = await context.app.$graphql.request(UsersQuery, {\n      search: context.route.query.search || '',\n      role: context.route.query.role || null,\n      sortBy: context.route.query.sortBy || null,\n      sortOrder: context.route.query.sortOrder || null,\n      // defaultItemsPerPage and calculateOffset comes\n      // from the List mixin. You may uses your own\n      // default items per page if necessary.\n      limit: defaultItemsPerPage,\n      offset: calculateOffset(\n        context.route.query.page || 1,\n        defaultItemsPerPage\n      ),\n    })\n    return {\n      items: result.users.items,\n      // We retrieve the current item counts from \n      // the GraphQL response.\n      count: result.users.count,\n    }\n  } catch (e) {\n    context.error(e)\n  }\n},\nmethods: {\n  async doSearch() {\n    this.updateRouter()\n    try {\n      const result = await this.$graphql.request(UsersQuery, {\n        search: this.filters.search,\n        role: this.filters.role,\n        sortBy: this.sortBy,\n        sortOrder: this.sortOrder,\n        // this.itemsPerPage is a data that comes from the List mixin.\n        // You may change this default limit with your own.\n        limit: this.itemsPerPage,\n        // this.offset is a computed value that\n        // comes from the List mixin.\n        offset: this.offset,\n      })\n      this.items = result.users.items\n      // We retrieve the current item counts from \n      // the GraphQL response\n      this.count = result.users.count\n    } catch (e) {\n      this.$nuxt.error(e)\n    }\n  },\n}\n")),Object(r.b)("h2",{id:"loading-state"},"Loading State"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-html",metastring:'title="Vue component <template> block"',title:'"Vue',component:!0,"<template>":!0,'block"':!0},'<b-pagination\n    :busy="isLoading"\n/>\n')),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},":busy")," displays a loader is ",Object(r.b)("inlineCode",{parentName:"li"},"true"),". It uses the ",Object(r.b)("inlineCode",{parentName:"li"},"isLoading")," data from the ",Object(r.b)("inlineCode",{parentName:"li"},"List")," mixin.")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-js",metastring:'title="Vue component <script> block"',title:'"Vue',component:!0,"<script>":!0,'block"':!0},"methods: {\n  async doSearch() {\n    // Enables loading.\n    this.isLoading = true\n    this.updateRouter()\n    try {\n      const result = await this.$graphql.request(UsersQuery, {\n        search: this.filters.search,\n        role: this.filters.role,\n        sortBy: this.sortBy,\n        sortOrder: this.sortOrder,\n        limit: this.itemsPerPage,\n        offset: this.offset,\n      })\n      this.items = result.users.items\n      this.count = result.users.count\n      // Disables loading.\n      this.isLoading = false\n    } catch (e) {\n      this.$nuxt.error(e)\n    }\n  },\n}\n")))}m.isMDXComponent=!0}}]);