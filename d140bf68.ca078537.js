(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{118:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return s}));var a=n(3),r=n(7),o=(n(0),n(131)),c={title:"Housekeeping",slug:"/development-environment/housekeeping"},i={unversionedId:"02_Development Environment/3_Housekeeping",id:"02_Development Environment/3_Housekeeping",isDocsHomePage:!1,title:"Housekeeping",description:"Docker and Docker compose",source:"@site/docs/02_Development Environment/3_Housekeeping.md",slug:"/development-environment/housekeeping",permalink:"/symfony-boilerplate/docs/development-environment/housekeeping",editUrl:"https://github.com/thecodingmachine/symfony-boilerplate/tree/master/docs/docs/02_Development Environment/3_Housekeeping.md",version:"current",sidebar:"docs",previous:{title:"Vagrant",permalink:"/symfony-boilerplate/docs/development-environment/vagrant"},next:{title:"Overview",permalink:"/symfony-boilerplate/docs/api"}},l=[{value:"Docker and Docker compose",id:"docker-and-docker-compose",children:[{value:"Linux",id:"linux",children:[]},{value:"Vagrant",id:"vagrant",children:[]},{value:"Docker Compose file",id:"docker-compose-file",children:[]}]},{value:"Vagrant and VirtualBox",id:"vagrant-and-virtualbox",children:[]}],p={rightToc:l};function s(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"docker-and-docker-compose"},"Docker and Docker compose"),Object(o.b)("p",null,"Make sure you always use the latest versions of Docker and Docker Compose."),Object(o.b)("p",null,"See ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.docker.com/release-notes/"}),"Docker and Docker Compose releases"),"."),Object(o.b)("h3",{id:"linux"},"Linux"),Object(o.b)("p",null,"For non-Vagrant users, follow the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.docker.com/engine/install/#server"}),"Docker"),"\nand ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.docker.com/compose/install/#install-compose-on-linux-systems"}),"Docker Compose")," official documentation."),Object(o.b)("h3",{id:"vagrant"},"Vagrant"),Object(o.b)("p",null,"For Vagrant users, update the variable ",Object(o.b)("inlineCode",{parentName:"p"},"VAGRANT_DOCKER_COMPOSE_VERSION")," from the ",Object(o.b)("em",{parentName:"p"},".env")," file and run:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash",metastring:'title="console"',title:'"console"'}),"# If the VM is running.\nvagrant halt\n\n# Always.\nvagrant destroy\nmake vagrant\nvagrant up\n\n# Versions check.\nvagrant ssh\ndocker --version\ndocker-compose --version\n")),Object(o.b)("p",null,"It will re-create the Vagrant VM with the latest versions of Docker and Docker Compose."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","Don't forget to update the ",Object(o.b)("em",{parentName:"p"},".env.dist")," file for your colleagues too \ud83d\ude09"))),Object(o.b)("h3",{id:"docker-compose-file"},"Docker Compose file"),Object(o.b)("p",null,"Each service from the ",Object(o.b)("em",{parentName:"p"},"docker-compose.yml")," file uses a Docker image and a version number."),Object(o.b)("p",null,"By default, most of the versions should use the ",Object(o.b)("inlineCode",{parentName:"p"},"X.Y")," format (",Object(o.b)("inlineCode",{parentName:"p"},"X")," for major updates, ",Object(o.b)("inlineCode",{parentName:"p"},"Y")," for minor ones)."),Object(o.b)("p",null,"The idea here is that running ",Object(o.b)("inlineCode",{parentName:"p"},"docker-compose pull")," will only update Docker images with bugs fixes."),Object(o.b)("p",null,"For major and minor updates, read the patch note and the related documentation carefully before updating\nyour ",Object(o.b)("em",{parentName:"p"},"docker-compose.yml")," file."),Object(o.b)("p",null,"Releases:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/containous/traefik/releases"}),"Traefik")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/thecodingmachine/docker-images-nodejs#images"}),"TheCodingMachine NodeJS")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/thecodingmachine/docker-images-php#images"}),"TheCodingMachine PHP")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://hub.docker.com/_/mysql?tab=tags"}),"MySQL")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/phpmyadmin/phpmyadmin/releases"}),"phpMyAdmin")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://hub.docker.com/r/bitnami/redis/tags"}),"Redis")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/mailhog/MailHog/releases"}),"MailHog")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/minio/minio/releases"}),"MinIO"))),Object(o.b)("h2",{id:"vagrant-and-virtualbox"},"Vagrant and VirtualBox"),Object(o.b)("p",null,"Run ",Object(o.b)("inlineCode",{parentName:"p"},"vagrant version")," to see your current version and the latest one.\nFollow the printed instructions for upgrading Vagrant if required."),Object(o.b)("p",null,"For VirtualBox, open the application, it should tell you to download the newer version (if any)."),Object(o.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"\ud83d\udce3","\xa0","\xa0","From time to time, you may also update the ",Object(o.b)("inlineCode",{parentName:"p"},"VAGRANT_BOX")," variable from the ",Object(o.b)("em",{parentName:"p"},".env")," file (and from ",Object(o.b)("em",{parentName:"p"},"env.dist"),")\nwith a newer ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://app.vagrantup.com/bento"}),"Ubuntu box"),". The update process for Vagrant users is the same as updating\nthe variable ",Object(o.b)("inlineCode",{parentName:"p"},"VAGRANT_DOCKER_COMPOSE_VERSION"),"."))))}s.isMDXComponent=!0},131:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return u}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),s=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=s(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),b=s(n),d=a,u=b["".concat(c,".").concat(d)]||b[d]||m[d]||o;return n?r.a.createElement(u,i(i({ref:t},p),{},{components:n})):r.a.createElement(u,i({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var p=2;p<o;p++)c[p]=n[p];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);